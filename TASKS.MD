# Liste des t√¢ches - Projet MCP Agile Server

## Initialisation
- [x] Cr√©er le projet Node.js (`npm init`)
- [x] Cr√©er la structure de dossiers `server/`, `mvp/`, `iterations/`
- [x] Ajouter les d√©pendances n√©cessaires (`dotenv`, `zod`, `openai`, etc.)

## D√©veloppement du serveur
- [x] Cr√©er `index.js` pour lancer le serveur MCP
- [x] Charger la cl√© API via `.env`
- [x] Impl√©menter la commande `generateBacklog`
- [x] G√©n√©rer les fichiers `.md` : Epic, User Stories, Tasks
- [x] G√©n√©rer les crit√®res Gherkin pour chaque User Story
- [x] Organiser en `/mvp/`, `/iterations/iteration-1`, etc.
- [x] Afficher un message de succ√®s une fois termin√©

## Int√©gration Windsurf
- [x] Cr√©er `mcp_config.json` compatible Windsurf
- [x] Tester l'ex√©cution dans Windsurf avec stdio

## Publication npmjs
- [x] Ajouter `bin` dans `package.json`
- [x] Ajouter un exemple de commande avec `npx`
- [x] Ajouter un exemple avec Docker
- [x] Cr√©er un fichier `.npmignore`
- [x] Publier le package sur npmjs.com

## Documentation
- [x] R√©diger le `README.md`
- [x] Expliquer comment param√©trer `.env`
- [x] Fournir un exemple de prompt utilisateur
- [x] Documenter les formats de sortie (Markdown)
- [x] Ajouter des instructions pour l'automatisation IA

## T√¢ches suppl√©mentaires
- [x] Refactoriser le code en modules testables
- [x] Ajouter des tests unitaires
- [x] Cr√©er un Dockerfile
- [x] Proposer une interface interactive en ligne de commande
- [x] Ajouter une option pour sauvegarder le JSON brut g√©n√©r√©

## AgilePlanner - Suivi des t√¢ches

Ce fichier liste les t√¢ches importantes √† r√©aliser ou d√©j√† finalis√©es pour la maintenance et l'am√©lioration du projet.

## T√¢ches en cours

- [x] 1. Ajouter une section BuyMeACoffee (avec logo et lien) dans `README.md` et `README-EN.MD`
- [x] 2. Corriger les tests un par un jusqu'√† ce qu'ils passent tous. UTiliser le mcp server sequentialthinking pour le raisonnement et context7 (pour la doc)
    - [x] Tests d'int√©gration MCP (r√©√©crits et passent tous)
    - [x] `markdown-generator.test.js` est corrig√© et passe
    - [x] `backlog-generator.test.js` est corrig√© et passe
- [x] 3. Optimisations et corrections
    - [x] R√©soudre le probl√®me de duplication du fichier backlog.json (√©viter qu'il soit cr√©√© √† deux endroits)
- [x] 4. Pr√©parer l'envoi sur npmjs.com
    - [x] Mise √† jour du package.json (version, files, scripts)
    - [x] Cr√©ation d'un fichier LICENSE standard (MIT)
    - [x] Mise √† jour des README avec les instructions d'installation npm
    - [x] Ajout de l'option npx pour la configuration Windsurf/Cascade
    - [x] Renommage du package en `agile-planner-mcp-server` et mise √† jour de toutes les r√©f√©rences
    - [x] Mise √† jour de l'URL du d√©p√¥t Git distant pour correspondre au nouveau nom
- [x] 5. Publier sur npmjs.com
- [x] 6. Mettre √† jour les fichiers `Dockerfile` et `docker-compose.yml`
    - [x] Mise √† jour du Dockerfile pour inclure tous les fichiers n√©cessaires
    - [x] Ajout des variables d'environnement pour le mode MCP
    - [x] Mise √† jour des chemins pour le dossier de sortie `.agile-planner-backlog`
    - [x] Mise √† jour des noms pour refl√©ter le nouveau nom du package
- [x] 7. Terminer la correction des tests restants (aucun)

Cochez la case une fois la t√¢che termin√©e. Les t√¢ches sont r√©alis√©es dans l'ordre indiqu√© pour garantir la stabilit√© et la qualit√© du projet.

## üéâ Projet finalis√© !

**Toutes les t√¢ches ont √©t√© compl√©t√©es avec succ√®s !** Le projet Agile Planner MCP est maintenant :

1. ‚úÖ Enti√®rement fonctionnel en mode CLI et MCP
2. ‚úÖ Publi√© sur npmjs.com sous le nom `agile-planner-mcp-server`
3. ‚úÖ Document√© en fran√ßais et en anglais
4. ‚úÖ Packag√© avec Docker pour un d√©ploiement facile
5. ‚úÖ Tests unitaires et d'int√©gration op√©rationnels

Le package est maintenant pr√™t √† √™tre utilis√© par la communaut√©. Pour toute am√©lioration future ou rapport de bug, utilisez le [d√©p√¥t GitHub](https://github.com/cyberlife-coder/agile-planner-mcp-server/issues).

Date de finalisation : 4 mai 2025

## üöÄ √âvolutions futures (v1.1.0)

### D√©veloppement de la fonctionnalit√© `generateFeature`

- [x] 1. Cr√©er le sch√©ma de validation dans `server/lib/tool-schemas.js`
    - [x] D√©finir le sch√©ma JSON pour `generateFeature`
    - [x] Ajouter les validations pour `storyCount` (minimum 3)
    - [x] G√©rer les param√®tres optionnels (`businessValue`, `iterationName`, etc.)

- [x] 2. Cr√©er `server/lib/feature-generator.js`
    - [x] Impl√©menter la fonction principale `generateFeature`
    - [x] Cr√©er le prompt adapt√© pour l'API OpenAI/Groq
    - [x] R√©utiliser la logique de validation JSON de `backlog-generator.js`
    - [x] Impl√©menter la d√©tection de contexte (backlog existant)

- [x] 3. √âtendre `server/lib/markdown-generator.js`
    - [x] Ajouter la fonction `generateFeatureMarkdown`
    - [x] Pr√©server les instructions IA existantes
    - [x] Impl√©menter la structure de fichiers feature ‚Üí user stories ‚Üí tasks
    - [x] Ajouter des liens de navigation entre les fichiers
    - [x] √âviter d'√©craser les fichiers existants

- [x] 4. Int√©grer au serveur MCP dans `server/index.js`
    - [x] Ajouter le tool dans `handleToolsList`
    - [x] Cr√©er le handler `handleGenerateFeature`
    - [x] S'assurer de la conformit√© avec les standards MCP
    - [x] Garantir que tous les logs sont sur stderr

- [x] 5. Tests et documentation
    - [x] Cr√©er `tests/feature-generator.test.js`
    - [x] Tester la g√©n√©ration avec diff√©rents nombres d'US
    - [x] Tester la validation JSON (format invalide, champs manquants)
    - [x] Tester la pr√©servation des fichiers existants
    - [x] Tester la compatibilit√© avec les diff√©rents providers (OpenAI, Groq)
    - [x] Mettre √† jour la documentation pour inclure la nouvelle fonctionnalit√©
    - [x] Ajouter des exemples d'utilisation dans README.md et README-FR.md

### Sp√©cifications d√©taill√©es

#### Sch√©ma d'entr√©e pour `generateFeature`
```json
{
  "type": "object",
  "required": ["featureDescription"],
  "properties": {
    "featureDescription": {
      "type": "string",
      "description": "Description d√©taill√©e de la feature √† g√©n√©rer"
    },
    "iterationName": {
      "type": "string",
      "description": "Nom de l'it√©ration (ex: 'iteration-3', 'next')",
      "default": "next"
    },
    "storyCount": {
      "type": "integer",
      "description": "Nombre de user stories √† g√©n√©rer",
      "minimum": 3,
      "default": 3
    },
    "businessValue": {
      "type": "string",
      "description": "Valeur m√©tier de cette feature (optionnel)"
    },
    "outputPath": {
      "type": "string",
      "description": "Chemin de sortie personnalis√© (optionnel)"
    }
  }
}
```

#### Structure de fichiers g√©n√©r√©s
```
.agile-planner-backlog/
‚îú‚îÄ‚îÄ README.md                    # Vue d'ensemble mise √† jour
‚îú‚îÄ‚îÄ backlog.json                 # Donn√©es brutes mises √† jour
‚îú‚îÄ‚îÄ features/
‚îÇ   ‚îú‚îÄ‚îÄ feature-1/              
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature.md          # Description de la feature
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ [nouvelle-feature]/      # G√©n√©r√©e par generateFeature
‚îÇ       ‚îî‚îÄ‚îÄ feature.md          # Description compl√®te avec liens
‚îî‚îÄ‚îÄ user-stories/
    ‚îú‚îÄ‚îÄ feature-1/
    ‚îÇ   ‚îî‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ [nouvelle-feature]/
        ‚îú‚îÄ‚îÄ story-1.md          # US avec t√¢ches incluses
        ‚îú‚îÄ‚îÄ story-2.md
        ‚îî‚îÄ‚îÄ story-n.md          # Selon storyCount
```

#### Aspects essentiels √† respecter
1. Crit√®res INVEST et format Gherkin pour les user stories
2. Instructions IA dans chaque fichier
3. Navigation entre feature et user stories
4. Distribution intelligente et non-redondante des US
5. D√©tection et respect du contexte existant
6. Compatibilit√© stricte avec la sp√©cification MCP
7. Historique des g√©n√©rations dans un fichier de log

### Prochaines √©tapes (v1.1.x)

- [x] 1. Tests unitaires pour la fonctionnalit√© `generateFeature`
   - [x] Cr√©er le fichier `tests/feature-generator.test.js`
   - [x] Tester la g√©n√©ration de feature avec diff√©rents nombres d'US
   - [x] Tester la validation JSON (format invalide, champs manquants)
   - [x] Tester la pr√©servation des fichiers existants
   - [x] Tester la compatibilit√© avec les diff√©rents providers (OpenAI, Groq)

- [x] 2. Interface CLI pour `generateFeature`
   - [x] √âtendre le fichier `server/lib/cli.js` pour ajouter la nouvelle commande
   - [x] Cr√©er des options pour le nombre d'US et la valeur business
   - [x] Ajouter une validation interactive des entr√©es utilisateur
   - [x] Impl√©menter un affichage console convivial du r√©sultat

- [x] 3. Documentation utilisateur
   - [x] Mettre √† jour le README.md et README-FR.md avec la nouvelle fonctionnalit√©
   - [x] Ajouter des exemples d'utilisation via CLI et MCP
   - [x] Cr√©er un guide d'utilisation pour l'extension de backlog existant
   - [x] Documenter les bonnes pratiques pour la description des features

- [ ] 4. D√©tection et am√©lioration du contexte
   - [ ] Analyser le backlog existant avant de g√©n√©rer de nouvelles features
   - [ ] Sugg√©rer des features compl√©mentaires bas√©es sur le backlog existant
   - [ ] √âviter les duplications et les incoh√©rences avec l'existant
   - [ ] Ajouter une option pour g√©n√©rer des features li√©es √† un epic existant

- [ ] 5. √âvolutions suppl√©mentaires
   - [ ] Enrichir les fichiers g√©n√©r√©s avec des m√©tadonn√©es (tags, priorit√©, etc.)
   - [ ] Ajouter la possibilit√© d'exporter vers des outils externes (Jira, Trello)
   - [ ] R√©utiliser les templates existants pour les features g√©n√©r√©es
   - [ ] Fonction de g√©n√©ration de planning pr√©visionnel d'impl√©mentation

- [x] 6. Am√©liorations architecturales et coh√©rence MCP/CLI (v1.1.1)
   - [x] Cr√©er un module centralis√© de gestion des erreurs (`server/lib/errors.js`)
   - [x] Centraliser l'initialisation du client API (`server/lib/api-client.js`)
   - [x] Restructurer le routage MCP selon la spec 2025-03 (`server/lib/mcp-router.js`)
   - [x] Standardiser le style asynchrone dans les handlers
   - [x] Mettre √† jour le handler `initialize` pour √™tre conforme √† la sp√©cification MCP 2025-03
   - [x] Cr√©er des modules d'exportation pour √©liminer les d√©pendances circulaires
   - [x] Ajouter des tests unitaires pour les nouvelles classes

- [ ] 7. Mettons tout √† jour pour npmjs.com
   - [x] Mettre √† jour le package.json
   - [x] Mettre √† jour le README.md
   - [x] Mettre √† jour le README-FR.md
   - [x] Mettre √† jour le Dockerfile
   - [x] Mettre √† jour le docker-compose.yml
   - [x] publier sur npmjs.com

- [x] 8. Correction de bugs et mise √† jour mineure (v1.1.2)
    - [x] Correction de l'√©criture des fichiers en mode MCP
    - [x] R√©solution des incompatibilit√©s batch vs g√©n√©rateur
    - [x] Mise √† jour du package.json (version 1.1.2)
    - [x] Mise √† jour du README.md
    - [x] Mise √† jour du README-FR.md

- [x] 9. Correction du probl√®me de chemins dupliqu√©s (v1.1.3)
    - [x] Correction de la duplication du dossier .agile-planner-backlog
    - [x] Mise √† jour du package.json (version 1.1.3)
